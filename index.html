<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CCNA 대화형 학습 SPA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* 기본 네비게이션 버튼 스타일 */
        .nav-button {
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .nav-button.active {
            background-color: #3b82f6; /* bg-blue-600 */
            color: white;
        }
        /* 챕터 네비게이션 버튼 특별 스타일 */
        #chapter-nav .nav-button.active {
            background-color: #1e40af; /* bg-blue-800 */
            color: white;
        }
        /* 하위 주제 네비게이션 버튼 특별 스타일 */
        #sub-topic-nav .nav-button.active {
            background-color: #60a5fa; /* bg-blue-400 */
            color: white;
        }

        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .layer-box {
            border: 2px solid transparent;
            transition: transform 0.2s ease-in-out, border-color 0.2s ease-in-out, background-color 0.2s ease-in-out;
        }
        .layer-box:hover {
            transform: translateY(-5px);
            border-color: #3b82f6;
        }
        .layer-box.selected {
            background-color: #bfdbfe;
            border-color: #2563eb;
        }
        .characteristic-card {
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .characteristic-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .details-pane {
            min-height: 150px;
        }
        .details-pane::-webkit-scrollbar {
            width: 8px;
        }
        .details-pane::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        .details-pane::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 4px;
        }
        .details-pane::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        .comparison-grid > div {
            border: 1px solid #e5e7eb; /* gray-200 */
        }
        /* 네비게이션 바 높이 고정 및 스티키 동작을 위한 스타일 */
        #chapter-nav {
            height: 50px; /* 챕터 네비게이션 높이 예시 */
        }
        #sub-topic-nav {
            top: 50px; /* 챕터 네비게이션 높이만큼 내려옴 */
            height: 46px; /* 하위 주제 네비게이션 높이 예시 */
        }
        main {
             padding-top: 10px; /* 하위 네비게이션과 콘텐츠 사이 간격 */
        }
        .protocol-header-table th, .protocol-header-table td {
            border: 1px solid #d1d5db; /* gray-300 */
            padding: 0.5rem;
            text-align: center;
            font-size: 0.875rem; /* text-sm */
        }
        .protocol-header-table th {
            background-color: #f3f4f6; /* gray-100 */
        }
        .binary-conversion-table {
            width: auto;
            margin-left: auto;
            margin-right: auto;
            border-collapse: collapse;
        }
        .binary-conversion-table th, .binary-conversion-table td {
            border: 1px solid #e5e7eb;
            padding: 0.25rem 0.5rem;
            text-align: center;
            min-width: 30px;
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-800">
    <header class="bg-sky-700 text-white shadow-lg">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-3">
            <h1 class="text-2xl sm:text-3xl font-bold text-center">CCNA 대화형 학습기</h1>
        </div>
    </header>

    <nav id="chapter-nav" class="bg-sky-600 text-white shadow-md sticky top-0 z-50 flex flex-wrap justify-center items-center space-x-2 sm:space-x-4 px-4">
        </nav>

    <nav id="sub-topic-nav" class="bg-stone-200 shadow-md sticky z-40">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div id="sub-topic-buttons-container" class="flex flex-wrap justify-center space-x-2 sm:space-x-4 py-2">
                </div>
        </div>
    </nav>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
        <section id="basics" data-chapter-id="chapter3" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>네트워킹 기본</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">네트워크란 무엇인가?</h3>
                <p class="text-stone-600 leading-relaxed">
                    네트워크는 지리적으로 분산된 장치(컴퓨터, 서버, 라우터 등)들을 서로 연결하여 정보를 교환하고 자원을 공유할 수 있도록 하는 통신 시스템입니다. 예를 들어, 인터넷은 전 세계의 수많은 네트워크들을 연결하는 거대한 광역 네트워크(WAN)의 한 예입니다. 이를 통해 뉴욕과 보스턴, 혹은 서울과 런던처럼 멀리 떨어진 곳에서도 데이터를 주고받을 수 있습니다. 이 섹션에서는 네트워크의 기초와 주요 특성들을 살펴봅니다.
                </p>
            </div>
            <h3 class="text-xl font-semibold mb-4 text-stone-700">주요 네트워크 특성</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 characteristic-cards-container">
                </div>
            <div id="characteristic-details" class="mt-6 bg-white p-6 rounded-lg shadow-lg min-h-[100px]">
                <p class="text-stone-500 italic">위의 특성 중 하나를 클릭하여 설명을 확인하세요.</p>
            </div>
        </section>

        <section id="osi" data-chapter-id="chapter3" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>OSI 모델</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">OSI 모델 개요</h3>
                <p class="text-stone-600 leading-relaxed mb-2">
                    OSI(Open Systems Interconnection) 모델은 국제 표준화 기구(ISO)에서 개발한 네트워크 통신을 위한 개념적 프레임워크입니다. 이 모델은 복잡한 네트워크 통신 과정을 7개의 추상적인 계층으로 나누어 설명함으로써, 서로 다른 시스템 간의 상호 운용성을 확보하고 네트워크 기술 개발 및 학습을 용이하게 합니다.
                </p>
                <p class="text-stone-600 leading-relaxed">
                    아래 다이어그램에서 각 계층을 클릭하여 상세 정보(기능, PDU, 관련 장비 등)를 확인해보세요.
                </p>
            </div>
            <div class="flex flex-col lg:flex-row gap-6">
                <div id="osi-layers-diagram" class="lg:w-1/3 grid grid-cols-1 gap-2"></div>
                <div id="osi-layer-details" class="lg:w-2/3 bg-white p-6 rounded-lg shadow-lg details-pane overflow-y-auto">
                    <p class="text-stone-500 italic">왼쪽 다이어그램에서 계층을 선택하여 설명을 확인하세요.</p>
                </div>
            </div>
            <div class="mt-6 bg-white p-6 rounded-lg shadow-lg">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">데이터 캡슐화 및 역캡슐화</h3>
                <p class="text-stone-600 leading-relaxed mb-2"><strong>캡슐화:</strong> 송신 측 데이터는 상위 계층에서 하위 계층으로 이동하면서 헤더(및 트레일러)가 추가됩니다.</p>
                <p class="text-stone-600 leading-relaxed"><strong>역캡슐화:</strong> 수신 측 데이터는 하위 계층에서 상위 계층으로 이동하면서 헤더(및 트레일러)가 제거됩니다.</p>
            </div>
             <div class="mt-6 bg-white p-6 rounded-lg shadow-lg">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">OSI 모델의 이점</h3>
                 <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li>네트워크 통신의 복잡성을 줄이고 계층별로 나누어 이해하기 쉽게 합니다.</li>
                    <li>표준화를 통해 여러 제조업체의 장비 간 상호 운용성을 증진시킵니다.</li>
                    <li>특정 계층의 변경이 다른 계층에 미치는 영향을 최소화하여 기술 개발과 유지보수를 용이하게 합니다.</li>
                </ul>
            </div>
        </section>

        <section id="tcpip" data-chapter-id="chapter3" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>TCP/IP 스택</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">TCP/IP 스택 개요</h3>
                <p class="text-stone-600 leading-relaxed mb-2">
                    TCP/IP 스택은 현재 인터넷 및 대부분의 컴퓨터 네트워크에서 사용되는 주요 프로토콜 모음입니다. OSI 모델보다 먼저 등장하여 사실상의 표준으로 자리 잡았습니다.
                </p>
                 <p class="text-stone-600 leading-relaxed">
                    아래 다이어그램에서 각 계층을 클릭하여 상세 정보(기능, 주요 프로토콜, PDU 등)를 확인해보세요.
                </p>
            </div>
            <div class="flex flex-col lg:flex-row gap-6">
                <div id="tcpip-layers-diagram" class="lg:w-1/3 grid grid-cols-1 gap-2"></div>
                <div id="tcpip-layer-details" class="lg:w-2/3 bg-white p-6 rounded-lg shadow-lg details-pane overflow-y-auto">
                     <p class="text-stone-500 italic">왼쪽 다이어그램에서 계층을 선택하여 설명을 확인하세요.</p>
                </div>
            </div>
        </section>

        <section id="comparison" data-chapter-id="chapter3" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>모델 비교</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">두 모델의 관계</h3>
                <p class="text-stone-600 leading-relaxed">
                    OSI 모델은 7계층의 이론적 프레임워크, TCP/IP 스택은 4계층(또는 5계층)의 실질적인 프로토콜 모음입니다.
                </p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-lg overflow-x-auto">
                <div class="grid grid-cols-2 gap-0 min-w-[600px] comparison-grid">
                    <div class="font-bold text-lg p-3 bg-stone-200 text-stone-700 text-center">OSI 모델 (7 계층)</div>
                    <div class="font-bold text-lg p-3 bg-stone-200 text-stone-700 text-center">TCP/IP 스택 (4 계층)</div>
                    <div class="p-3 border-t-0">7. 응용 계층</div> <div class="p-3 row-span-3 border-l-0 border-t-0 flex items-center justify-center bg-sky-50">응용 계층</div>
                    <div class="p-3">6. 표현 계층</div>
                    <div class="p-3">5. 세션 계층</div>
                    <div class="p-3 bg-emerald-50">4. 전송 계층</div> <div class="p-3 bg-emerald-50 border-l-0 flex items-center justify-center">전송 계층</div>
                    <div class="p-3 bg-amber-50">3. 네트워크 계층</div> <div class="p-3 bg-amber-50 border-l-0 flex items-center justify-center">인터넷 계층</div>
                    <div class="p-3">2. 데이터 링크 계층</div> <div class="p-3 row-span-2 border-l-0 flex items-center justify-center bg-rose-50">네트워크 액세스 계층</div>
                    <div class="p-3">1. 물리 계층</div>
                </div>
            </div>
        </section>

        <section id="cisco_os" data-chapter-id="chapter4" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>Cisco 운영체제</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">Cisco 운영체제의 간략한 역사</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-2">
                    <li>Cisco는 1984년 라우터로 시작, IOS(Internetwork Operating System) 사용.</li>
                    <li>Catalyst 스위치는 1993년 Crescendo 인수, 초기 CatOS 사용 (현재 미사용).</li>
                    <li>Cisco 방화벽은 1995년 Network Translation의 PIX 방화벽 인수.</li>
                    <li>이후 스위치와 방화벽은 IOS로 통합.</li>
                </ul>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">기타 Cisco 운영체제</h3>
                 <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-2">
                    <li>IOS는 여전히 대부분의 Cisco 기업용 네트워크 장비의 주요 OS.</li>
                    <li>최근 개발된 다른 OS: NX-OS (Nexus, MDS), IOS-XR (NCS, CRS 등), IOS-XE (ASR1000).</li>
                    <li>다른 OS들의 CLI는 IOS와 거의 동일.</li>
                </ul>
            </div>
        </section>

        <section id="cisco_connect" data-chapter-id="chapter4" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>Cisco 장비 연결</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">초기 연결 (콘솔)</h3>
                <p class="text-stone-600 leading-relaxed">Cisco 장비는 기본 IP 주소가 없는 경우가 많아 초기 설정 시 콘솔 연결이 필요합니다. 콘솔 케이블(DB9-RJ45 또는 USB-MiniUSB)을 사용하여 장비의 콘솔 포트와 PC를 연결합니다. Putty와 같은 터미널 에뮬레이터를 사용합니다. (Packet Tracer에서는 시뮬레이션으로 대체)</p>
                 <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1 mt-2">
                    <li>콘솔 연결은 장비 부팅 과정 확인 및 IP 응답 불가 시 문제 해결에도 사용됩니다.</li>
                 </ul>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">네트워크를 통한 연결 (SSH/Telnet)</h3>
                <p class="text-stone-600 leading-relaxed">일상적인 관리는 SSH(Secure Shell)를 통해 장비의 관리 IP 주소로 접속합니다. Telnet도 지원되지만 보안에 취약하여 권장되지 않습니다. 기업 환경에서는 AAA 서버와 연동하여 보안 로그인을 강화합니다.</p>
                <p class="text-stone-600 leading-relaxed mt-2"><strong>Out-of-Band Management:</strong> 운영 트래픽과 관리 트래픽을 분리하기 위해 별도의 관리 네트워크를 구성하는 방식입니다.</p>
            </div>
        </section>

        <section id="cisco_ios_nav" data-chapter-id="chapter4" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>IOS 네비게이션</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">명령어 계층 (Command Hierarchy)</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li><strong>User Exec mode:</strong> `hostname&gt;` (기본 정보 확인)</li>
                    <li><strong>Privileged Exec mode:</strong> `hostname#` (모든 정보 확인, 설정 변경 시작. `enable` 명령어로 진입)</li>
                    <li><strong>Global Configuration mode:</strong> `hostname(config)#` (전역 설정. `configure terminal` 명령어로 진입)</li>
                    <li><strong>Interface Configuration mode:</strong> `hostname(config-if)#` (인터페이스 설정. `interface [타입 슬롯/포트]` 명령어로 진입)</li>
                    <li>`exit`는 한 단계 위로, `end`는 Privileged Exec 모드로 바로 이동.</li>
                </ul>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">유용한 CLI 기능</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li><strong>명령어 축약:</strong> 고유하게 식별되는 한 짧게 입력 가능 (예: `en` for `enable`).</li>
                    <li><strong>Context Sensitive Help (?):</strong> `sh?` (sh로 시작하는 명령어), `show ?` (show 다음 옵션), `show ip ?` (show ip 다음 옵션).</li>
                    <li><strong>커서 이동:</strong> 화살표 키, Ctrl-A (줄 처음), Ctrl-U (줄 삭제).</li>
                    <li><strong>명령어 히스토리:</strong> 위/아래 화살표 키.</li>
                    <li><strong>출력 제어:</strong> Enter (한 줄씩), Spacebar (한 페이지씩), Ctrl-C (중단).</li>
                    <li><strong>Piped Commands (|):</strong> `show running-config | include FastEthernet0/0` (특정 문자열 포함 라인만 표시).</li>
                </ul>
            </div>
        </section>

        <section id="cisco_config_mgmt" data-chapter-id="chapter4" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>IOS 설정 관리</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">설정 저장 위치</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li><strong>Flash:</strong> IOS 운영체제 이미지 저장.</li>
                    <li><strong>NVRAM (Non-Volatile RAM):</strong> Startup Configuration (시작 설정) 저장. 부팅 시 이 설정을 사용.</li>
                    <li><strong>RAM (Random Access Memory):</strong> Running Configuration (현재 실행 중인 설정) 저장. 장비 부팅 시 Startup Config가 RAM으로 로드됨.</li>
                </ul>
            </div>
             <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">설정 저장 및 초기화</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li>명령어는 즉시 적용되지만, 재부팅 시 사라집니다 (Running Config에만 반영).</li>
                    <li><strong>설정 저장 (영구 보존):</strong> `copy running-config startup-config` 또는 `wr` (축약형).</li>
                    <li><strong>설정 초기화 (공장 초기화):</strong> `erase startup-config` 또는 `wr erase` 후 `reload` (재부팅).</li>
                </ul>
            </div>
        </section>

        <section id="transport_overview" data-chapter-id="chapter5" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>전송 계층 개요</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">주요 기능</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li>호스트 간의 투명한 데이터 전송을 제공합니다.</li>
                    <li>종단 간(End-to-End) 오류 복구 및 흐름 제어를 담당합니다.</li>
                    <li><strong>흐름 제어 (Flow Control):</strong> 송신측의 데이터 전송 속도를 조절하여 수신측 호스트가 모든 데이터를 처리할 수 있도록 보장합니다.</li>
                </ul>
            </div>
        </section>

        <section id="session_multiplexing" data-chapter-id="chapter5" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>세션 멀티플렉싱</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">개념</h3>
                <p class="text-stone-600 leading-relaxed">
                    세션 멀티플렉싱은 호스트가 단일 링크를 통해 동시에 여러 세션을 지원하고 개별 트래픽 스트림을 관리하는 프로세스입니다.
                    이를 통해 하나의 컴퓨터에서 웹 브라우징(HTTP), 이메일(SMTP), 파일 전송(FTP) 등 여러 네트워크 애플리케이션을 동시에 사용할 수 있습니다.
                </p>
                <div class="mt-4 p-4 bg-stone-50 rounded-md">
                    <p class="text-sm text-stone-500 italic">예: 송신자는 HTTP (포트 80) 트래픽과 SMTP (포트 25) 트래픽을 동시에 수신자에게 보낼 수 있으며, 수신자는 각 포트 번호를 통해 해당 트래픽을 올바른 애플리케이션으로 전달합니다.</p>
                </div>
            </div>
        </section>

        <section id="port_numbers" data-chapter-id="chapter5" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>계층 4 포트 번호</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">역할 및 사용</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li><strong>목적지 포트 번호 (Destination Port Number):</strong> 상위 계층 프로토콜(애플리케이션)을 식별하는 데 사용됩니다.
                        <ul class="list-circle list-inside ml-4 mt-1">
                            <li>예: HTTP는 포트 80, SMTP 이메일은 포트 25를 사용합니다.</li>
                        </ul>
                    </li>
                    <li><strong>출발지 포트 번호 (Source Port Number):</strong> 송신자도 계층 4 헤더에 출발지 포트 번호를 추가합니다. 이 번호는 보통 동적으로 할당됩니다.</li>
                    <li><strong>세션 추적:</strong> 출발지 포트 번호와 목적지 포트 번호의 조합은 특정 통신 세션을 추적하는 데 사용될 수 있습니다. (예: 송신자 포트 1500 -> 수신자 포트 80, 응답은 수신자 포트 80 -> 송신자 포트 1500)</li>
                </ul>
            </div>
        </section>

        <section id="tcp_protocol" data-chapter-id="chapter5" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>TCP (Transmission Control Protocol)</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">주요 특징</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li>TCP와 UDP는 가장 일반적인 계층 4 프로토콜입니다.</li>
                    <li><strong>연결 지향 (Connection-oriented):</strong> 연결이 설정되면 해당 연결을 통해 양방향으로 데이터를 보낼 수 있습니다.</li>
                    <li><strong>시퀀싱 (Sequencing):</strong> 세그먼트가 올바른 순서로 처리되고 누락된 것이 없는지 확인합니다.</li>
                    <li><strong>신뢰성 (Reliable):</strong> 수신 호스트는 송신자에게 확인 응답(acknowledgment)을 보냅니다. 손실된 세그먼트는 재전송됩니다.</li>
                    <li><strong>흐름 제어 (Flow control):</strong> 수행합니다.</li>
                </ul>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">TCP 3-Way 핸드셰이크 (Three-Way Handshake)</h3>
                <p class="text-stone-600 leading-relaxed mb-2">TCP 연결을 설정하는 과정입니다:</p>
                <ol class="list-decimal list-inside text-stone-600 leading-relaxed space-y-1">
                    <li><strong>SYN:</strong> 클라이언트가 서버에 연결 요청 (SYNchronize) 메시지를 보냅니다.</li>
                    <li><strong>SYN-ACK:</strong> 서버는 클라이언트의 요청을 수락하고, 자신도 연결을 설정하겠다는 SYNchronize-ACKnowledgment 메시지를 보냅니다.</li>
                    <li><strong>ACK:</strong> 클라이언트는 서버의 응답을 확인했다는 ACKnowledge 메시지를 보냅니다. 이로써 연결이 설정됩니다.</li>
                </ol>
                 <div class="mt-4 p-4 bg-stone-50 rounded-md text-center">
                    <p class="text-sm text-stone-700 font-medium">송신자 --- SYN ---> 수신자</p>
                    <p class="text-sm text-stone-700 font-medium">송신자 <--- SYN-ACK --- 수신자</p>
                    <p class="text-sm text-stone-700 font-medium">송신자 --- ACK ---> 수신자</p>
                </div>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6 overflow-x-auto">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">TCP 헤더 구조 (20 Bytes 기본)</h3>
                <table class="w-full protocol-header-table">
                    <thead>
                        <tr><th colspan="2">0-15 비트</th><th colspan="2">16-31 비트</th></tr>
                    </thead>
                    <tbody>
                        <tr><td colspan="2">출발지 포트 (16)</td><td colspan="2">목적지 포트 (16)</td></tr>
                        <tr><td colspan="4">순서 번호 (Sequence Number) (32)</td></tr>
                        <tr><td colspan="4">확인 응답 번호 (Acknowledgment Number) (32)</td></tr>
                        <tr><td>헤더 길이 (4)</td><td>예약 (6)</td><td>코드 비트 (6)</td><td>윈도우 크기 (16)</td></tr>
                        <tr><td colspan="2">체크섬 (Checksum) (16)</td><td colspan="2">긴급 포인터 (Urgent Pointer) (16)</td></tr>
                        <tr><td colspan="4">옵션 (Options) (0 또는 32, 존재 시)</td></tr>
                        <tr><td colspan="4">데이터 (Data) (가변 길이)</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="udp_protocol" data-chapter-id="chapter5" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>UDP (User Datagram Protocol)</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">주요 특징</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li>트래픽을 최선형(Best Effort)으로 전송합니다.</li>
                    <li><strong>비연결 지향 (Connectionless):</strong> 호스트 간 핸드셰이크 연결 설정이 없습니다.</li>
                    <li><strong>시퀀싱 미수행:</strong> 세그먼트 순서 보장이나 누락 확인을 하지 않습니다.</li>
                    <li><strong>비신뢰성 (Unreliable):</strong> 수신 호스트가 확인 응답을 보내지 않습니다.</li>
                    <li><strong>흐름 제어 미수행:</strong> 흐름 제어를 하지 않습니다.</li>
                    <li>오류 감지 및 복구가 필요한 경우 상위 계층에서 처리해야 합니다.</li>
                </ul>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6 overflow-x-auto">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">UDP 헤더 구조 (8 Bytes)</h3>
                 <table class="w-full protocol-header-table">
                    <thead>
                        <tr><th>0-15 비트</th><th>16-31 비트</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>출발지 포트 (16)</td><td>목적지 포트 (16)</td></tr>
                        <tr><td>길이 (Length) (16)</td><td>체크섬 (Checksum) (16)</td></tr>
                        <tr><td colspan="2">데이터 (Data) (가변 길이)</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="tcp_vs_udp" data-chapter-id="chapter5" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>TCP vs UDP 및 주요 포트</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">선택 기준</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li><strong>TCP:</strong> 신뢰성이 중요한 트래픽에 주로 사용됩니다 (예: 웹 브라우징, 이메일, 파일 전송).</li>
                    <li><strong>UDP:</strong> 실시간 애플리케이션(음성, 영상 스트리밍 등)은 TCP의 추가 오버헤드를 감당하기 어려워 UDP를 사용합니다. 약간의 데이터 손실이 있더라도 속도가 중요하기 때문입니다.</li>
                    <li>일부 애플리케이션은 TCP와 UDP를 모두 사용할 수 있습니다 (예: DNS).</li>
                </ul>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">일반적인 애플리케이션과 목적지 포트</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="p-4 bg-sky-50 rounded-md">
                        <h4 class="font-semibold text-sky-700 mb-2">TCP</h4>
                        <ul class="list-disc list-inside text-sm text-stone-600">
                            <li>FTP (21)</li>
                            <li>SSH (22)</li>
                            <li>Telnet (23)</li>
                            <li>SMTP (25) - 이메일 전송</li>
                            <li>HTTP (80)</li>
                            <li>HTTPS (443)</li>
                        </ul>
                    </div>
                    <div class="p-4 bg-emerald-50 rounded-md">
                        <h4 class="font-semibold text-emerald-700 mb-2">UDP</h4>
                        <ul class="list-disc list-inside text-sm text-stone-600">
                            <li>TFTP (69)</li>
                            <li>SNMP (161)</li>
                            <li>DHCP (67, 68)</li>
                            <li>RIP</li>
                        </ul>
                    </div>
                    <div class="p-4 bg-amber-50 rounded-md">
                        <h4 class="font-semibold text-amber-700 mb-2">TCP 및 UDP</h4>
                        <ul class="list-disc list-inside text-sm text-stone-600">
                            <li>DNS (53)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="network_layer_intro" data-chapter-id="chapter6" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>네트워크 계층 및 IP 헤더</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">네트워크 계층 (Layer 3)</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li>패킷을 목적지까지 라우팅하고 서비스 품질(QoS)을 담당합니다.</li>
                    <li>가장 잘 알려진 프로토콜은 IP(Internet Protocol)이며, 이 섹션에서는 IPv4에 중점을 둡니다.</li>
                    <li>IP는 비연결형 프로토콜로, 계층 3에서는 확인 응답(acknowledgment)이 없습니다.</li>
                    <li>기타 계층 3 프로토콜에는 ICMP(Internet Control Message Protocol), IPSec 등이 있습니다.</li>
                </ul>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">IP 주소 체계</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li>계층 3에서 구현되는 논리적 주소 지정 방식입니다.</li>
                    <li>네트워크 설계자는 IP 주소 체계를 사용하여 전체 네트워크를 더 작은 '서브넷'으로 분할합니다.</li>
                    <li>이는 성능 및 보안을 향상시키고 문제 해결을 용이하게 합니다.</li>
                    <li>계층 2 MAC 주소는 단일 플랫 주소 지정 방식을 사용하는 반면, 계층 3에서는 네트워크 간의 논리적 분리가 이루어집니다.</li>
                </ul>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6 overflow-x-auto">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">IPv4 헤더 구조 (기본 20 Bytes)</h3>
                <table class="w-full protocol-header-table">
                    <thead>
                        <tr><th class="w-1/4">필드</th><th class="w-1/4">길이 (비트)</th><th class="w-1/2">설명</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Version</td><td>4</td><td>IP 프로토콜 버전 (예: IPv4는 4)</td></tr>
                        <tr><td>Header Length (IHL)</td><td>4</td><td>헤더 길이 (32비트 워드 단위, 최소 5 = 20바이트)</td></tr>
                        <tr><td>Type of Service (ToS) / DSCP</td><td>8</td><td>서비스 품질 및 우선순위</td></tr>
                        <tr><td>Total Length</td><td>16</td><td>헤더와 데이터를 포함한 전체 패킷 길이 (바이트 단위)</td></tr>
                        <tr><td>Identification</td><td>16</td><td>단편화된 패킷들을 식별하기 위한 값</td></tr>
                        <tr><td>Flags</td><td>3</td><td>단편화 제어 플래그 (예: DF - Don't Fragment, MF - More Fragments)</td></tr>
                        <tr><td>Fragment Offset</td><td>13</td><td>단편화된 패킷의 원래 위치 오프셋</td></tr>
                        <tr><td>Time To Live (TTL)</td><td>8</td><td>패킷이 네트워크에서 무한 루프에 빠지는 것을 방지하기 위한 생존 시간 (홉 카운트)</td></tr>
                        <tr><td>Protocol</td><td>8</td><td>상위 계층 프로토콜 식별자 (예: TCP는 6, UDP는 17, ICMP는 1)</td></tr>
                        <tr><td>Header Checksum</td><td>16</td><td>헤더 오류 검출을 위한 체크섬</td></tr>
                        <tr><td>Source IP Address</td><td>32</td><td>송신 호스트의 IP 주소</td></tr>
                        <tr><td>Destination IP Address</td><td>32</td><td>수신 호스트의 IP 주소</td></tr>
                        <tr><td>Options (if any)</td><td>가변 (0-40 바이트)</td><td>선택적 필드, 보안, 라우팅 제어 등 (패딩 포함)</td></tr>
                        </tbody>
                </table>
                <p class="text-xs text-stone-500 mt-2 italic">* 데이터 부분은 헤더 뒤에 옵니다.</p>
            </div>
        </section>

        <section id="ip_traffic_types" data-chapter-id="chapter6" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>IP 트래픽 유형</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">주요 IP 트래픽 유형</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-2">
                    <li>
                        <strong>유니캐스트 (Unicast):</strong>
                        단일 출발지에서 단일 목적지 호스트로 전송되는 트래픽입니다. 대부분의 인터넷 트래픽이 유니캐스트 방식입니다.
                        <p class="text-sm text-stone-500 italic ml-4">예: 웹사이트 접속, 이메일 송수신.</p>
                    </li>
                    <li>
                        <strong>브로드캐스트 (Broadcast):</strong>
                        단일 출발지에서 동일 서브넷 내의 모든 호스트로 전송되는 트래픽입니다. 라우터는 기본적으로 브로드캐스트 트래픽을 다른 네트워크로 전달하지 않습니다.
                        <p class="text-sm text-stone-500 italic ml-4">예: ARP 요청, DHCP Discover 메시지.</p>
                    </li>
                    <li>
                        <strong>멀티캐스트 (Multicast):</strong>
                        단일 출발지에서 특정 그룹에 속한 다수의 관심 있는 호스트들에게만 전송되는 트래픽입니다. 유니캐스트로 여러 번 보내는 것보다 효율적입니다.
                        <p class="text-sm text-stone-500 italic ml-4">예: IPTV, 온라인 게임, 화상 회의.</p>
                    </li>
                </ul>
            </div>
        </section>

        <section id="ipv4_address_binary" data-chapter-id="chapter6" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>IPv4 주소와 2진수 변환</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">IPv4 주소 기본</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li>IPv4 주소는 32비트 길이입니다.</li>
                    <li>일반적으로 4개의 '옥텟(octet)'으로 나누어 점으로 구분된 10진수 형식으로 표현합니다 (예: `192.168.10.15`).</li>
                    <li>각 옥텟은 8비트 길이이며 (4 * 8 = 32비트), 0부터 255까지의 값을 가질 수 있습니다.</li>
                    <li>IP 주소는 서버, 프린터, 네트워크 장비(라우터, 스위치)에는 수동(정적)으로 설정하고, 일반 PC에는 DHCP를 통해 자동으로 할당하는 경우가 많습니다.</li>
                    <li>서브넷 간의 논리적 분리를 이해하려면 IP 주소를 2진수로 이해하는 것이 중요합니다.</li>
                </ul>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">10진수를 2진수로 변환하기</h3>
                <p class="text-stone-600 leading-relaxed mb-2">컴퓨터는 2진수(0 또는 1)로 작동합니다. 각 2진수 자리는 오른쪽부터 1, 2, 4, 8, 16, 32, 64, 128의 값을 가집니다 (8비트 옥텟의 경우).</p>
                <p class="text-stone-600 leading-relaxed mb-2">예시: 10진수 236을 2진수로 변환</p>
                <table class="binary-conversion-table mb-2">
                    <thead><tr><th>128</th><th>64</th><th>32</th><th>16</th><th>8</th><th>4</th><th>2</th><th>1</th></tr></thead>
                    <tbody><tr><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td></tr></tbody>
                </table>
                <p class="text-stone-600 leading-relaxed">128 + 64 + 32 + 0 + 8 + 4 + 0 + 0 = 236. 따라서 236은 2진수로 `11101100`입니다.</p>

                <p class="text-stone-600 leading-relaxed mb-2 mt-4">예시: IPv4 주소 `192.168.10.15`를 2진수로 변환</p>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li>`192` = `11000000` (128 + 64)</li>
                    <li>`168` = `10101000` (128 + 32 + 8)</li>
                    <li>`10`  = `00001010` (8 + 2)</li>
                    <li>`15`  = `00001111` (8 + 4 + 2 + 1)</li>
                </ul>
                <p class="text-stone-600 leading-relaxed mt-2">따라서 `192.168.10.15` = `11000000.10101000.00001010.00001111` 입니다.</p>
            </div>
        </section>

        <section id="subnet_mask_intro" data-chapter-id="chapter6" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>서브넷 마스크</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">서브넷 마스크의 역할</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li>호스트가 목적지 주소가 동일 서브넷에 있는지 다른 서브넷에 있는지 판단하는 데 사용됩니다.</li>
                    <li>동일 서브넷 내의 통신은 스위치를 통해 직접 이루어집니다.</li>
                    <li>다른 서브넷으로의 통신은 라우터를 통해 전달되어야 합니다.</li>
                    <li>서브넷 마스크도 IP 주소처럼 32비트 길이며, 점으로 구분된 10진수 또는 슬래시 표기법으로 표현됩니다.</li>
                </ul>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">네트워크 부분과 호스트 부분</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li>IP 주소는 서브넷 마스크에 의해 '네트워크 부분(Network Portion)'과 '호스트 부분(Host Portion)'으로 나뉩니다.</li>
                    <li>서브넷 마스크에서 2진수 '1'로 표시된 부분은 IP 주소의 네트워크 부분을, '0'으로 표시된 부분은 호스트 부분을 나타냅니다.</li>
                    <li>예: IP 주소 `192.168.10.15` / 서브넷 마스크 `255.255.255.0`
                        <ul class="list-circle list-inside ml-4 mt-1">
                            <li>IP (2진수): `11000000.10101000.00001010.00001111`</li>
                            <li>마스크 (2진수): `11111111.11111111.11111111.00000000`</li>
                            <li>네트워크 부분: `192.168.10`</li>
                            <li>호스트 부분: `.15`</li>
                        </ul>
                    </li>
                    <li>유효한 서브넷 마스크는 항상 왼쪽부터 연속된 '1'들로 시작하고, 그 뒤에 연속된 '0'들이 옵니다. (예: `11111111.11110000.00000000.00000000`는 유효, `11101101...`은 유효하지 않음)</li>
                </ul>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">특별한 주소: 네트워크 주소와 브로드캐스트 주소</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li>호스트 부분의 모든 비트가 '0'인 주소는 **네트워크 주소(Network Address 또는 Network ID)**를 나타내며, 특정 서브넷 자체를 지칭합니다. 이 주소는 일반 호스트에 할당할 수 없습니다. (예: `192.168.10.0/24`)</li>
                    <li>호스트 부분의 모든 비트가 '1'인 주소는 해당 서브넷의 **브로드캐스트 주소(Broadcast Address)**를 나타내며, 이 주소로 전송된 트래픽은 해당 서브넷의 모든 호스트에게 전달됩니다. 이 주소도 일반 호스트에 할당할 수 없습니다. (예: `192.168.10.255/24`)</li>
                    <li>따라서 `192.168.10.0/24` 서브넷에서 호스트에 할당 가능한 IP 주소 범위는 `192.168.10.1`부터 `192.168.10.254`까지입니다.</li>
                </ul>
            </div>
        </section>

        <section id="slash_notation" data-chapter-id="chapter6" class="content-section">
            <h2 class="text-2xl font-semibold mb-6 text-sky-700"><span class="chapter-title-display"></span>슬래시 표기법 (CIDR Notation)</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-3 text-stone-700">개념 및 사용</h3>
                <ul class="list-disc list-inside text-stone-600 leading-relaxed space-y-1">
                    <li>서브넷 마스크는 항상 왼쪽부터 연속된 '1'들로 구성되므로, '1'의 개수를 세어 슬래시(/) 뒤에 숫자로 표현하는 것이 더 편리합니다. 이를 슬래시 표기법 또는 CIDR(Classless Inter-Domain Routing) 표기법이라고 합니다.</li>
                    <li>예시 1:
                        <ul class="list-circle list-inside ml-4 mt-1">
                            <li>서브넷 마스크 `255.255.255.0`은 2진수로 `11111111.11111111.11111111.00000000` 입니다.</li>
                            <li>'1'이 24개 있으므로 슬래시 표기법으로는 `/24`입니다.</li>
                            <li>IP 주소 `192.168.10.15`와 서브넷 마스크 `255.255.255.0`은 `192.168.10.15/24`로 표현할 수 있습니다.</li>
                            <li>네트워크 주소는 `192.168.10.0/24`로 표현합니다.</li>
                        </ul>
                    </li>
                    <li>예시 2:
                        <ul class="list-circle list-inside ml-4 mt-1">
                            <li>서브넷 마스크 `255.0.0.0`은 2진수로 `11111111.00000000.00000000.00000000` 입니다.</li>
                            <li>'1'이 8개 있으므로 슬래시 표기법으로는 `/8`입니다.</li>
                            <li>IP 주소 `10.10.10.15`와 서브넷 마스크 `255.0.0.0`은 `10.10.10.15/8`로 표현할 수 있습니다.</li>
                            <li>네트워크 주소는 `10.0.0.0/8`로 표현합니다.</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </section>

    </main>

    <footer class="bg-stone-800 text-stone-300 text-center p-6 mt-12">
        <p>&copy; 2025 CCNA 학습 자료. Flackbox PDF 내용 기반.</p>
    </footer>

    <script>
        // Data for chapters and their sections
        const studyMaterials = [
            {
                id: 'chapter3',
                shortTitle: '제3장',
                fullTitle: '제3장: 네트워크 모델 및 기본',
                sections: [
                    { id: 'basics', title: '네트워킹 기본' },
                    { id: 'osi', title: 'OSI 모델' },
                    { id: 'tcpip', title: 'TCP/IP 스택' },
                    { id: 'comparison', title: '모델 비교' }
                ]
            },
            {
                id: 'chapter4',
                shortTitle: '제4장',
                fullTitle: '제4장: Cisco IOS 시작하기',
                sections: [
                    { id: 'cisco_os', title: 'Cisco OS' },
                    { id: 'cisco_connect', title: 'Cisco 장비 연결' },
                    { id: 'cisco_ios_nav', title: 'IOS 네비게이션' },
                    { id: 'cisco_config_mgmt', title: 'IOS 설정 관리' }
                ]
            },
            {
                id: 'chapter5',
                shortTitle: '제5장',
                fullTitle: '제5장: 전송 계층 (Transport Layer)',
                sections: [
                    { id: 'transport_overview', title: '전송 계층 개요' },
                    { id: 'session_multiplexing', title: '세션 멀티플렉싱' },
                    { id: 'port_numbers', title: '계층 4 포트 번호' },
                    { id: 'tcp_protocol', title: 'TCP' },
                    { id: 'udp_protocol', title: 'UDP' },
                    { id: 'tcp_vs_udp', title: 'TCP vs UDP & 포트' }
                ]
            },
            {
                id: 'chapter6',
                shortTitle: '제6장',
                fullTitle: '제6장: 네트워크 계층 및 IP 주소 체계',
                sections: [
                    { id: 'network_layer_intro', title: '네트워크 계층 & IP 헤더' },
                    { id: 'ip_traffic_types', title: 'IP 트래픽 유형' },
                    { id: 'ipv4_address_binary', title: 'IPv4와 2진수 변환' },
                    { id: 'subnet_mask_intro', title: '서브넷 마스크' },
                    { id: 'slash_notation', title: '슬래시 표기법' }
                ]
            }
            // Add more chapters here in the future
        ];

        const chapterNavContainer = document.getElementById('chapter-nav');
        const subTopicButtonsContainer = document.getElementById('sub-topic-buttons-container');
        const allContentSections = document.querySelectorAll('.content-section');
        
        const characteristicDetailsDiv = document.getElementById('characteristic-details');
        const osiLayersDiagramDiv = document.getElementById('osi-layers-diagram');
        const osiLayerDetailsDiv = document.getElementById('osi-layer-details');
        const tcpipLayersDiagramDiv = document.getElementById('tcpip-layers-diagram');
        const tcpipLayerDetailsDiv = document.getElementById('tcpip-layer-details');

        const networkCharacteristicsData = [
            { id: 'topology', name: '토폴로지', description: '네트워크의 물리적 또는 논리적 연결 구조. 예: 스타형, 버스형, 링형, 메시형.' },
            { id: 'speed', name: '속도', description: '데이터 전송 빠르기 (Mbps, Gbps). 대역폭, 지연 시간 등 영향.' },
            { id: 'cost', name: '비용', description: '네트워크 구축 및 유지보수 비용.' },
            { id: 'security', name: '보안', description: '네트워크 자산 보호. 방화벽, VPN, 암호화 등.' },
            { id: 'availability', name: '가용성', description: '네트워크 정상 작동 시간 비율. 이중화 등.' },
            { id: 'scalability', name: '확장성', description: '성능 저하 없이 확장 능력.' },
            { id: 'reliability', name: '신뢰성', description: '고장 없이 일관되게 작동하는 정도.' }
        ];
        const osiLayersData = [
            { name: '7. 응용 계층', pdu: '데이터', color: 'bg-purple-100', hoverColor: 'hover:bg-purple-200', details: '사용자 앱에 네트워크 서비스 제공. HTTP, FTP, SMTP, DNS 등.', devices: '호스트, 게이트웨이'},
            { name: '6. 표현 계층', pdu: '데이터', color: 'bg-indigo-100', hoverColor: 'hover:bg-indigo-200', details: '데이터 형식 정의, 암호화, 압축. 예: ASCII, JPEG.', devices: '호스트, 게이트웨이' },
            { name: '5. 세션 계층', pdu: '데이터', color: 'bg-blue-100', hoverColor: 'hover:bg-blue-200', details: '호스트 간 세션 설정, 관리, 종료. 예: NetBIOS, RPC.', devices: '호스트, 게이트웨이' },
            { name: '4. 전송 계층', pdu: '세그먼트/데이터그램', color: 'bg-green-100', hoverColor: 'hover:bg-green-200', details: '종단 간 신뢰성/정확한 데이터 전송. TCP, UDP. 흐름/오류 제어.', devices: '호스트, 방화벽' },
            { name: '3. 네트워크 계층', pdu: '패킷', color: 'bg-yellow-100', hoverColor: 'hover:bg-yellow-200', details: '경로 선택(라우팅), IP 주소 사용 논리적 주소 지정. IP 프로토콜.', devices: '라우터, L3 스위치' },
            { name: '2. 데이터 링크 계층', pdu: '프레임', color: 'bg-orange-100', hoverColor: 'hover:bg-orange-200', details: '물리적 링크 신뢰성 있는 데이터 전송. MAC 주소 사용 물리적 주소 지정. 이더넷, PPP.', devices: '스위치, 브리지, NIC' },
            { name: '1. 물리 계층', pdu: '비트', color: 'bg-red-100', hoverColor: 'hover:bg-red-200', details: '데이터를 전기/광/무선 신호로 변환 전송. 케이블, 커넥터 등 정의.', devices: '허브, 리피터, 케이블' }
        ].reverse();
        const tcpIpLayersData = [
            { name: '4. 응용 계층', pdu: '데이터', color: 'bg-purple-100', hoverColor: 'hover:bg-purple-200', details: 'OSI의 응용,표현,세션 기능 포함. HTTP, FTP, SMTP 등.', protocols: 'HTTP, FTP, SMTP, DNS' },
            { name: '3. 전송 계층', pdu: '세그먼트/데이터그램', color: 'bg-green-100', hoverColor: 'hover:bg-green-200', details: '종단 간 통신, 신뢰성/흐름 제어. TCP, UDP.', protocols: 'TCP, UDP' },
            { name: '2. 인터넷 계층', pdu: '패킷', color: 'bg-yellow-100', hoverColor: 'hover:bg-yellow-200', details: '경로 결정(라우팅), 논리적 주소 지정(IP). IP, ICMP 등.', protocols: 'IP, ICMP, IGMP' },
            { name: '1. 네트워크 액세스 계층', pdu: '프레임', color: 'bg-red-100', hoverColor: 'hover:bg-red-200', details: 'OSI의 데이터링크,물리 기능 결합. 이더넷, Wi-Fi 등.', protocols: 'Ethernet, Wi-Fi' }
        ].reverse();


        function renderChapterNav() {
            chapterNavContainer.innerHTML = ''; 
            studyMaterials.forEach(chapter => {
                const button = document.createElement('button');
                button.className = 'nav-button text-sm sm:text-base font-medium px-3 py-2 sm:px-4 rounded-md hover:bg-sky-500 hover:text-white';
                button.textContent = chapter.shortTitle;
                button.dataset.chapterId = chapter.id;
                button.addEventListener('click', () => {
                    handleChapterSelect(chapter.id);
                });
                chapterNavContainer.appendChild(button);
            });
        }

        function handleChapterSelect(selectedChapterId) {
            document.querySelectorAll('#chapter-nav .nav-button').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.chapterId === selectedChapterId);
            });

            renderSubTopicNav(selectedChapterId);
            
            const chapterData = studyMaterials.find(ch => ch.id === selectedChapterId);
            if (chapterData && chapterData.sections.length > 0) {
                handleSubTopicSelect(selectedChapterId, chapterData.sections[0].id);
                const firstSubTopicButton = subTopicButtonsContainer.querySelector(`.nav-button[data-target="${chapterData.sections[0].id}"]`);
                if (firstSubTopicButton) {
                    document.querySelectorAll('#sub-topic-buttons-container .nav-button').forEach(btn => btn.classList.remove('active'));
                    firstSubTopicButton.classList.add('active');
                }
            } else {
                allContentSections.forEach(section => section.classList.remove('active'));
            }
        }

        function renderSubTopicNav(chapterId) {
            subTopicButtonsContainer.innerHTML = '';
            const chapter = studyMaterials.find(ch => ch.id === chapterId);
            if (!chapter) return;

            chapter.sections.forEach(section => {
                const button = document.createElement('button');
                button.className = 'nav-button text-xs sm:text-sm font-medium px-2 py-1 sm:px-3 sm:py-2 rounded-md hover:bg-sky-300 hover:text-sky-800';
                button.textContent = section.title;
                button.dataset.target = section.id; 
                button.dataset.chapterId = chapterId; 
                button.addEventListener('click', () => {
                    handleSubTopicSelect(chapterId, section.id);
                    document.querySelectorAll('#sub-topic-buttons-container .nav-button').forEach(btn => {
                        btn.classList.toggle('active', btn.dataset.target === section.id);
                    });
                });
                subTopicButtonsContainer.appendChild(button);
            });
        }

        function handleSubTopicSelect(chapterId, sectionId) {
            allContentSections.forEach(sectionEl => {
                const isCorrectSection = sectionEl.id === sectionId && sectionEl.dataset.chapterId === chapterId;
                sectionEl.classList.toggle('active', isCorrectSection);

                if(isCorrectSection) {
                    const chapterData = studyMaterials.find(ch => ch.id === chapterId);
                    const chapterTitleDisplay = sectionEl.querySelector('.chapter-title-display');
                    if (chapterTitleDisplay && chapterData) {
                        chapterTitleDisplay.textContent = chapterData.fullTitle + ": ";
                    }

                    if (sectionId === 'basics' && characteristicDetailsDiv) {
                        characteristicDetailsDiv.innerHTML = '<p class="text-stone-500 italic">위의 특성 중 하나를 클릭하여 설명을 확인하세요.</p>';
                    } else if (sectionId === 'osi' && osiLayerDetailsDiv) {
                        osiLayerDetailsDiv.innerHTML = '<p class="text-stone-500 italic">왼쪽 다이어그램에서 계층을 선택하여 설명을 확인하세요.</p>';
                        document.querySelectorAll('#osi-layers-diagram .layer-box.selected').forEach(box => box.classList.remove('selected'));
                    } else if (sectionId === 'tcpip' && tcpipLayerDetailsDiv) {
                        tcpipLayerDetailsDiv.innerHTML = '<p class="text-stone-500 italic">왼쪽 다이어그램에서 계층을 선택하여 설명을 확인하세요.</p>';
                        document.querySelectorAll('#tcpip-layers-diagram .layer-box.selected').forEach(box => box.classList.remove('selected'));
                    }
                }
            });
        }
        
        function renderNetworkCharacteristics() {
            const container = document.querySelector('#basics .characteristic-cards-container');
            if (!container) return;
            container.innerHTML = ''; 
            networkCharacteristicsData.forEach(char => {
                const card = document.createElement('div');
                card.className = 'characteristic-card bg-white p-4 rounded-lg shadow hover:shadow-md cursor-pointer';
                card.innerHTML = `<h4 class="font-semibold text-md text-sky-600">${char.name}</h4>`;
                card.addEventListener('click', () => {
                    if (characteristicDetailsDiv) {
                        characteristicDetailsDiv.innerHTML = `
                            <h4 class="font-semibold text-lg text-sky-700 mb-2">${char.name}</h4>
                            <p class="text-stone-600 leading-relaxed">${char.description}</p>`;
                    }
                });
                container.appendChild(card);
            });
        }
        
        function createLayerBox(layerData, detailsDiv, diagramId) {
            const layerBox = document.createElement('div');
            layerBox.className = `layer-box p-4 rounded-md shadow text-center cursor-pointer ${layerData.color} ${layerData.hoverColor} text-stone-700 font-medium`;
            layerBox.textContent = layerData.name;
            layerBox.addEventListener('click', () => {
                document.querySelectorAll(`#${diagramId} .layer-box`).forEach(box => box.classList.remove('selected'));
                layerBox.classList.add('selected');
                
                let detailsHtml = `
                    <h3 class="text-xl font-bold text-sky-700 mb-3">${layerData.name}</h3>
                    <p class="text-stone-600 leading-relaxed mb-2"><strong>PDU:</strong> ${layerData.pdu}</p>
                    <p class="text-stone-600 leading-relaxed mb-2"><strong>주요 기능 및 설명:</strong> ${layerData.details}</p>`;
                if (diagramId === 'osi-layers-diagram' && layerData.devices) {
                     detailsHtml += `<p class="text-stone-600 leading-relaxed"><strong>관련 장비:</strong> ${layerData.devices}</p>`;
                }
                if (diagramId === 'tcpip-layers-diagram' && layerData.protocols) {
                     detailsHtml += `<p class="text-stone-600 leading-relaxed"><strong>주요 프로토콜:</strong> ${layerData.protocols}</p>`;
                }
                if (detailsDiv) {
                    detailsDiv.innerHTML = detailsHtml;
                }
            });
            return layerBox;
        }

        function renderOsiLayers() {
            if (!osiLayersDiagramDiv) return;
            osiLayersDiagramDiv.innerHTML = '';
            osiLayersData.forEach(layer => {
                const layerBox = createLayerBox(layer, osiLayerDetailsDiv, 'osi-layers-diagram');
                osiLayersDiagramDiv.appendChild(layerBox);
            });
        }

        function renderTcpIpLayers() {
            if (!tcpipLayersDiagramDiv) return;
            tcpipLayersDiagramDiv.innerHTML = '';
            tcpIpLayersData.forEach(layer => {
                const layerBox = createLayerBox(layer, tcpipLayerDetailsDiv, 'tcpip-layers-diagram');
                tcpipLayersDiagramDiv.appendChild(layerBox);
            });
        }

        function initApp() {
            renderChapterNav();
            renderNetworkCharacteristics(); 
            renderOsiLayers(); 
            renderTcpIpLayers(); 

            if (studyMaterials.length > 0) {
                handleChapterSelect(studyMaterials[0].id);
            }
        }

        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
